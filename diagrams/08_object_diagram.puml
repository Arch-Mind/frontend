@startuml ArchMind_Object_Diagram

skinparam dpi 100
skinparam objectFontSize 12
skinparam objectAttributeFontSize 10
skinparam arrowFontSize 9
skinparam packageFontSize 12
skinparam linetype ortho

title ArchMind â€” Object Diagram\nRuntime Instance Snapshot During Repository Analysis

package "VS Code Extension Instance" #E3F2FD {

  object "ext : Extension" as ext #BBDEFB {
    context = ExtensionContext
    isActive = true
    version = "1.0.0"
  }

  object "panel : ArchitecturePanel" as panel #BBDEFB {
    title = "ArchMind: Architecture"
    viewColumn = ViewColumn.Two
    isVisible = true
  }

  object "scanner : FileSystemAnalyzer" as scanner #BBDEFB {
    workspaceRoot = "/home/user/project"
    ignoredPatterns = [".git", "node_modules", "dist"]
    detectedLanguages = ["TypeScript", "Python", "Rust"]
  }

  object "client : ApiClient" as client #BBDEFB {
    baseUrl = "http://localhost:8080/api/v1"
    authToken = "Bearer eyJhbG..."
    isConnected = true
  }

  object "graph : ArchitectureGraph" as agraph #BBDEFB {
    nodeCount = 142
    edgeCount = 287
    darkMode = false
    zoomLevel = 1.0
  }
}

package "API Gateway Objects" #E8F5E9 {

  object "router : Router" as router #C8E6C9 {
    port = 8080
    mode = "release"
    corsOrigins = ["*"]
  }

  object "job1 : AnalysisJob" as job1 #C8E6C9 {
    id = "a3f7c2d1-4e5b-..."
    repoUrl = "github.com/org/repo"
    branch = "main"
    status = "completed"
    createdAt = "2026-02-08T10:30:00Z"
    completedAt = "2026-02-08T10:31:45Z"
  }

  object "job2 : AnalysisJob" as job2 #C8E6C9 {
    id = "b8e4f1a2-7c3d-..."
    repoUrl = "github.com/org/frontend"
    branch = "develop"
    status = "processing"
    createdAt = "2026-02-08T10:35:00Z"
    completedAt = null
  }

  object "whEvent : WebhookEvent" as whEvent #C8E6C9 {
    id = "c9d2e3f4-1a5b-..."
    repoUrl = "github.com/org/repo"
    eventType = "push"
    processedAt = "2026-02-08T10:32:00Z"
  }
}

package "Ingestion Worker Objects" #FFF3E0 {

  object "consumer : JobConsumer" as consumer #FFE0B2 {
    queueName = "job_queue"
    pollTimeout = 30s
    activeJobId = "b8e4f1a2-7c3d-..."
  }

  object "cloner : RepoCloner" as cloner #FFE0B2 {
    tempDir = "/tmp/archmind/b8e4f1a2"
    repoSize = "12.4 MB"
    cloneStatus = "success"
  }

  object "tsParser : TreeSitterParser" as tsParser #FFE0B2 {
    supportedLangs = ["typescript", "python", "rust", "go"]
    currentFile = "src/main.ts"
    symbolsExtracted = 48
  }

  object "fpEngine : FingerprintEngine" as fpEngine #FFE0B2 {
    cacheSize = 256
    changedFiles = 12
    unchangedFiles = 98
  }
}

package "Graph Engine Objects" #F3E5F5 {

  object "graphSvc : GraphService" as graphSvc #E1BEE7 {
    neo4jUri = "bolt://localhost:7687"
    connectionPool = 10
  }

  object "layoutEng : LayoutEngine" as layoutEng #E1BEE7 {
    algorithm = "force-directed"
    iterations = 500
    nodeSpacing = 80
  }

  object "analysisEng : AnalysisEngine" as analysisEng #E1BEE7 {
    circularDepsFound = 3
    hotspotsDetected = 7
    impactedModules = 15
  }
}

package "Data Instances" #FFEBEE {

  object "file1 : FileNode" as file1 #EF9A9A {
    id = "fn_001"
    path = "src/extension.ts"
    language = "TypeScript"
    fingerprint = "a4c3b2..."
    linesOfCode = 185
  }

  object "func1 : FunctionNode" as func1 #EF9A9A {
    id = "fn_func_001"
    name = "activate"
    parameters = ["context: ExtensionContext"]
    returnType = "void"
    startLine = 12
    endLine = 45
  }

  object "class1 : ClassNode" as class1 #EF9A9A {
    id = "fn_cls_001"
    name = "ArchitecturePanel"
    methods = ["createOrShow", "dispose", "postMessage"]
    properties = ["panel", "extensionUri"]
    isAbstract = false
  }

  object "graphData : GraphData" as graphData #EF9A9A {
    nodes = [142 nodes]
    edges = [287 edges]
    metadata = {repo: "org/repo", analyzedAt: "..."}
  }
}

' === Relationships ===

ext --> panel : creates
ext --> scanner : uses
ext --> client : uses
panel --> agraph : renders

client --> router : connects to
router --> job1 : created
router --> job2 : created
router --> whEvent : received

consumer --> job2 : processing
consumer --> cloner : clones repo
consumer --> tsParser : parses files
consumer --> fpEngine : checks fingerprints

tsParser --> file1 : extracted
tsParser --> func1 : extracted
tsParser --> class1 : extracted

graphSvc --> layoutEng : applies layout
graphSvc --> analysisEng : runs analysis
graphSvc --> graphData : produces

agraph --> graphData : renders

footer ArchMind - UH4 | Object Diagram

@enduml
